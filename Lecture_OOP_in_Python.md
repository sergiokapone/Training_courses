# Об'єктно-орієнтоване програмування

## Мета заняття

Ознайомитись з основними поняттями об'єктно-орієнтованого програмування та навчитись створювати класи та об'єкти в мові програмування Python. Зрозуміти як класи можуть успадковувати атрибути інших класів.

## Основні поняття які будуть розглянуті

1. Клас
2. Об'єкт
3. Екземпляр класу
4. Атрибути класу
   - Поле
   - Метод
5. Успадкування. 
    - Батьківський та дочірній класи.
    - Method Resolution Order (MRO)
6. Поліморфізм та качина типізація

## Актуалізація опорних знань

1. Змінні, типи даних.
2. Методи рядків, списків та словників.

## Метод проведення

Від простого до складного. поступово будемо ускладнювати код. Там де треба робити навмисно помилки в коді, щоб пояснити ті чи інші поняття. Також можна проводити паралелі з тим, що вже відомо. Наприклад згадати методи словників, рядків, словників...

## Практична робота

### Створення класу

    - Як ми іменуємо класи (CamelCase)
    - Опис атрибутів: Визначення атрибутів класу, які визначають стан об'єкта.
    - Методи класу: Додавання методів для взаємодії з атрибутами.

    Створимо клас Dog (Собака)

    ```python
    class Dog:
        name: str = "Кубик"
        age: int = 15
    ```

    Як ми бачимо у нашому класі є змінні `name` та `age`. Ці змінні називаються __полями класу__, вони містять деяку інформацію про нашого узагальненого собаку. Полем може бути будь-який об'єкт Python. Зазвичай це змінна або контейнер (словник, список, рядок, тощо)

### Створення екземпляру.

Створимо екземпляр класу Dog:

```python
bobik: Dog = Dog()
print(bobik.name)
print(bobik.age)
```

Назвемо нашого Бобіка правильно і вкажемо правильний вік:

```python
bobik.name = "Бобік"
bobik.age  = 5
```

Однак, наш Бобік нічого не вміє робити. Перша команда, яку наб би хотілось, щоб виконував Бобік - це "голос". Але цю команду повинні вміти виконувати всі собаки, а не лише наш конкретний Бобік, тому в опис нашої собаки ми додамо "дію", яку будуть виконувати всі собаки. Ці дії називаються методами. Методи - це звичайнісінькі функції Python, вони оголошуються таким же чином, однак є особливість. Методи оперують з полями класу та/або аргументами, що їм передаються.

```python
class Dog:
    name: str = "Кубик"
    age: int = 15

    def voice(self):
        print("Гав! Гав! Гав!")
```

> Тут можна навмисно зробити помилку, щоб пояснити сенс параметру `self`:
> `TypeError: Dog.voice() takes 0 positional arguments but 1 was given`

### Створення іншого класу `Cat` (клас Кіт)

```python
class Cat:
    name: str = "Мурчик"
    age: int = 10

    def voice(self):
        print("Няв! Няв! Няв!")
```

Тут можна ще раз нагадати, що таке атрибути, поля та методи. (Краще попросити дітей нагадати).

### Успадкування.

Підмітимо, що у класів `Dog` та `Cat` є спільні риси, у них однакові поля і методи.
Крім того, можна згадати з зоології, що коти і собаки  - відносяться до класу ссавців (Mammal). 

А тому ми можемо створити клас Mammals.

```python
class Mammals:
    name: str = ""
    age: int
    phrase = ""

    def voice(self):
        return self.phrase
```

Далі вводимо поняття успадкування 

```python
class Dog(Mammal):
    phrase = "Гав! Гав! Гав!"

class Cat(Mammal):
    phrase = "Няв! Няв! Няв!"
```

Далі створюємо екземпляри класів 

```python
bobik = Dog()
bobik.name = "Бобік"
bobik.age = 5

murzik = Cat()
murzik.name = "Мурзік"
murzik.age = 10

cat2 = Cat()
cat2.name = "Пумка"
cat2.age = 15

print(bobik.voice())
print(murzik.voice())
print(cat2.voice())
```

### Пояснення MRO

У батьківському класі `Mammal` було визнано поле `phrase = ""`, але чому наші собаки і коти і собаки використовували не це поле, а те, що було визначено в їхніх класах? Це підказує нам те, в якому Python бере атрибути з класів.

Розглянемо ще приклад. Давайте розширимо наші класи.

1. Шукає атрибут серед атрибутів самого класу. Саме завдяки цьому ми перевизначили поле `phrase` для класів `Dog` та  `Cat`..
2. А якщо не знайде атрибут в самому класі? Тоді шукає атрибут у батьків.
3. А якщо батьків більше ніж один? Тоді шукає атрибут у першого з батьків (той, що вказано першим у списку батьків).
4. А якщо і там не знайшов? Шукає атрибут у батьках першого з батьків...
5. А от якщо ніде не знайшов. то викликає виняток, що атрибут не знайдено.

Приклад

```python
class Animal:
    name: str 
    age: int
    phrase: str

    def voice(self):
        return self.phrase
 
class Mammal(Animal):
    phrase: str = "Дай молоко!"
    def run(self):
        return f"{self.name} is moving"


class Bird(Animal):
    phrase: str = "Цвірінь! Цвірінь Цвірінь!"
    def fly(self):
        return f"{self.name} is moving"

class Dog(Mammal):
    phrase = "Гав! Гав! Гав"

class Cat(Mammal):
    phrase = "Няв! Няв! Няв"

class Bat(Mammal, Bird):
    pass

bat = Bat()
print(bat.voice())
```